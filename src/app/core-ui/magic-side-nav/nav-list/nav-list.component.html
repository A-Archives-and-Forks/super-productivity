<div class="g-multi-btn-wrapper">
  <nav-item
    [container]="'group'"
    [expanded]="isExpanded()"
    [ariaControls]="'group-' + item().id"
    [icon]="item().icon"
    [svgIcon]="item().svgIcon"
    [label]="item().label"
    [showLabels]="showLabels()"
    [showChevron]="item().children && item().children.length > 0 && showLabels()"
    (clicked)="onHeaderClick()"
  ></nav-item>

  @if (showLabels()) {
    @for (btn of item().additionalButtons; track btn.id) {
      @if (!btn.hidden) {
        <button
          class="additional-btn"
          mat-icon-button
          [matTooltip]="btn.tooltip | translate"
          (click)="btn.action?.()"
        >
          <mat-icon>{{ btn.icon }}</mat-icon>
        </button>
      }
    }
  }
</div>

@if (item().children && item().children.length > 0) {
  <ul
    class="nav-children"
    [class.expanded]="isExpanded()"
    [class.visible]="isExpanded()"
    [attr.id]="'group-' + item().id"
    role="list"
  >
    @for (child of item().children; track child.id) {
      <li
        class="nav-child-item"
        role="listitem"
      >
        @switch (child.type) {
          @case ('workContext') {
            <nav-item
              [workContext]="child.workContext"
              [type]="child.workContextType"
              [defaultIcon]="child.defaultIcon"
              [activeWorkContextId]="activeWorkContextId() || ''"
              [variant]="'nav'"
              [compact]="true"
              [showLabels]="true"
              [showMoreButton]="true"
            ></nav-item>
          }
          @case ('route') {
            <nav-item
              [container]="'route'"
              [navRoute]="child.route"
              [icon]="child.icon"
              [svgIcon]="child.svgIcon"
              [label]="child.label"
              [showLabels]="true"
              [compact]="true"
              (clicked)="itemClick.emit(child)"
            ></nav-item>
          }
          @case ('href') {
            <nav-item
              [container]="'href'"
              [navHref]="child.href"
              [icon]="child.icon"
              [svgIcon]="child.svgIcon"
              [label]="child.label"
              [showLabels]="true"
              [compact]="true"
              (clicked)="itemClick.emit(child)"
            ></nav-item>
          }
          @case ('action') {
            <nav-item
              [container]="'action'"
              [icon]="child.icon"
              [svgIcon]="child.svgIcon"
              [label]="child.label"
              [showLabels]="true"
              [compact]="true"
              (clicked)="itemClick.emit(child)"
            ></nav-item>
          }
        }
      </li>
    }
  </ul>
}
