<li
  class="nav-item"
  [class.has-children]="hasChildren()"
  role="listitem"
>
  @if (groupItem(); as gi) {
    @if (gi.additionalButtons && gi.additionalButtons.length > 0) {
      <!-- Multi-button wrapper for groups with additional buttons -->
      <nav-multi-btn
        [item]="gi"
        [showText]="showText()"
        [isGroupExpanded]="isGroupExpanded()"
        (itemClick)="onItemClick()"
      ></nav-multi-btn>
    } @else {
      <!-- Group without additional buttons -->
      <nav-item
        [item]="gi"
        [showText]="showText()"
        [isExpanded]="isGroupExpanded()"
        [activeWorkContextId]="activeWorkContextId()"
        (itemClick)="onItemClick()"
      ></nav-item>
    }
  } @else {
    <!-- Non-group standard nav item -->
    <nav-item
      [item]="item()"
      [showText]="showText()"
      [isExpanded]="false"
      [activeWorkContextId]="activeWorkContextId()"
      (itemClick)="onItemClick()"
    ></nav-item>
  }

  <!-- Children Items -->
  @if (groupItem(); as gi) {
    <ul
      class="nav-children"
      [class.expanded]="isGroupExpanded()"
      [class.visible]="isGroupExpanded()"
      [attr.id]="'group-' + gi.id"
      role="list"
    >
      @for (child of gi.children; track child.id) {
        <li
          class="nav-child-item"
          role="listitem"
        >
          <nav-item
            [item]="child"
            [showText]="true"
            [isChild]="true"
            [activeWorkContextId]="activeWorkContextId()"
            (itemClick)="onChildClick(child)"
          ></nav-item>
        </li>
      }
    </ul>
  }
</li>
